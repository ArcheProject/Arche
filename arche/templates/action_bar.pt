<tal:main xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="Arche">
<nav class="navbar navbar-default navbar-static-top" role="navigation">
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li><a href="${request.resource_url(context)}">View</a></li>
        <li tal:condition="view.has_permission('edit')"
            class="${request.view_name == 'edit' and 'active' or None}">
            <a href="${request.resource_url(context, 'edit')}">Edit</a>
        </li>
        <li><a href="${request.resource_url(context, 'contents')}">Contents</a></li>
        <li><a href="#">#Permissions</a></li>
        <li class="dropdown ${request.view_name == 'add' and 'active' or None}">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <tal:ts i18n:translate="">Add</tal:ts>
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            <tal:iterate repeat="factory view.addable_content(context)">
                <li><a href="${request.resource_url(context, 'add', query = {'content_type': factory.type_name})}">${factory.type_title}</a></li>
            </tal:iterate>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <tal:ts i18n:translate="">Actions</tal:ts>
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            <li role="presentation" class="dropdown-header" i18n:translate="">In context</li>
            <li tal:condition="view.root != context"><!-- FIXME: Other perm checks -->
                <a href="${request.resource_url(context, 'delete')}">
                    <span i18n:translate="">Delete</span>
                    <span class="glyphicon glyphicon-remove pull-right"></span>
                </a>
            </li>
            <li role="presentation" class="dropdown-header" i18n:translate="">View selection</li>
            <tal:iterate repeat="(name, title) view.selectable_views(context).items()">
            <li>
                <a href="${request.resource_url(context, 'set_view', query = {'name': name})}">
                    ${title}
                    <span tal:condition="context.default_view == name" class="glyphicon glyphicon-ok pull-right"></span>
                </a>
            </li>
            </tal:iterate>
          </ul>
        </li>
      </ul>
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <span i18n:translate="">Site</span>
            <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <li role="presentation" class="dropdown-header" i18n:translate="">Users</li>
          <li><a href="${request.resource_url(view.root['users'])}" i18n:translate="">Overview</a></li>
          <li><a href="${request.resource_url(view.root['users'], 'add', query = {'content_type': 'User'})}" i18n:translate="">Add</a></li>
          <li class="divider"></li>
        </ul>
      </li>
    </ul>
    </div>
</nav>
</tal:main>
